<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewPort" content="width=device-width, initial-scale=1, maximum-scale=1">
		<script src="jquery-3.4.1.js"></script>
		<script src="nbridge.js"></script>
		<script src="appBridge.js"></script>
		<script src="preferenceBridge.js"></script>
		<script src="uiBridge.js"></script>
		<script type="text/javascript">
			/*NBRIDGE*/
			function platform() {
				alert('platform : ' + nbridge.platform());
			}
			/*APP BRIDGE*/
			function appInfo() {
				nbridge.app.appInfo().then(function(result) {
					alert('name : ' + result.name + '\nversion : ' + result.version);
				});
			}
            function deviceInfo() {
                nbridge.app.deviceInfo().then(function(result) {
                    alert('deviceId : ' + result.deviceId +
                    '\nversion : ' + result.version +
                    '\nmodel : ' + result.model +
                    '\nnetwork : ' + result.network +
                    '\nregion : ' + result.region +
                    '\nlanguage : ' + result.language);
                });
            }

			function exit() {
				nbridge.app.exit();
			}

			function goSetting() {
				nbridge.app.goSetting();
			}

			function toast() {
				nbridge.ui.toast('this is toast');
			}
			function showLoading() {
				nbridge.ui.showLoading();

<!--				setTimeout(function() {-->
<!--  					nbridge.ui.hideLoading();-->
<!--				}, 6000);-->
			}
			function dismissLoading() {
				nbridge.ui.hideLoading();
			}

            function uploadFile() {
                // test site : http://www.csm-testcenter.org/test?do=show&subdo=common&test=file_upload
                nbridge.ui.filePicker('gallery').then(function(file) {
                    var url = "http://www.csm-testcenter.org/test/";
                    var files = [];
                    files.push(file);
                    nbridge.ui.showLoading()
                    nbridge.ui.uploadFiles(url, 'file_upload', 'SESSION=OTcyNThlODItMmU4MS00NWQ4LWIwODItNzg4ODY5ZWMxYzVl', {"do": "test", "subdo": "file_upload"}, files).then(function(res) {
                        alert('success upload');
                        console.log("success upload");
                        nbridge.ui.hideLoading()
                    }, function(err) {
                        alert('failure upload');
                        console.log("failure upload");
                        nbridge.ui.hideLoading()
                    });

                }, function(err) {
                    console.log("err");
                });
            }
            
		</script>
	</head>
	<body style="background-color: darkgray;" onload="onLoad()">
		<h2 align="center">COMMON</h2>
		<p align="center">
			<button style="width:80%; height:40%;" onclick="platform()">PLATFORM</button><br></br>
		</p>
		<h2 align="center">APP</h2>
		<p align="center">
			<button style="width:80%; height:40%;" onclick="appInfo()">APP INFO</button><br></br>
			<button style="width:80%; height:40%;" onclick="deviceInfo()">DEVICE INFO</button><br></br>
			<button style="width:80%; height:40%;" onclick="exit()">EXIT</button><br></br>
		</p>
		<h2 align="center">PREFERENCE</h2>
		<p align="center">
			<button style="width:80%; height:40%;" onclick="get()">GET</button><br></br>
			<button style="width:80%; height:40%;" onclick="set()">SET</button><br></br>
			<button style="width:80%; height:40%;" onclick="remove()">REMOVE</button><br></br>
		</p>
		<h2 align="center">UI</h2>
		<p align="center">
			<button style="width:80%; height:40%;" onclick="toast()">TOAST</button><br></br>
			<button style="width:80%; height:40%;" onclick="showLoading()">SHOW LOADING</button><br></br>
			<button style="width:80%; height:40%;" onclick="dismissLoading()">DISMISS LOADING</button><br></br><br></br>
			<button style="width:80%; height:40%;" onclick="goSetting('push')">GO SETTING(PUSH)</button><br></br>
			<button style="width:80%; height:40%;" onclick="goSetting('setting')">GO SETTING(SETTING)</button><br></br>

            <button style="width:80%; height:40%;" onclick="uploadFile()">PICK A FILE AND UPLOAD FILE</button><br></br>
            <p><img id="sign_preview" style="display: none;" height="200" width="400"></p>
		</p>
         
	</body>
</html>
