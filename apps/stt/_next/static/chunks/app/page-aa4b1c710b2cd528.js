(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{479:(e,t,r)=>{Promise.resolve().then(r.bind(r,4496))},4496:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var n=r(5155),s=r(2115);let c=()=>{let[e,t]=(0,s.useState)(!1),[r,c]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[u,i]=(0,s.useState)("ko-KR"),[o,d]=(0,s.useState)({message:"마이크 대기 중",type:"stopped"}),[h,m]=(0,s.useState)(0),[x,g]=(0,s.useState)(""),p=(0,s.useRef)(null),f=(0,s.useRef)(null),b=(0,s.useRef)(null),w=(0,s.useRef)(null),v=(0,s.useRef)(null),C=(0,s.useRef)(null),y=(0,s.useRef)([]),j=(0,s.useCallback)(()=>"webkitSpeechRecognition"in window||"SpeechRecognition"in window||(g("이 브라우저는 음성 인식을 지원하지 않습니다. Chrome 브라우저를 사용해주세요."),!1),[]),k=(0,s.useCallback)(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});f.current=new(window.AudioContext||window.webkitAudioContext),b.current=f.current.createAnalyser(),w.current=f.current.createMediaStreamSource(e),b.current.fftSize=128;let t=b.current.frequencyBinCount;v.current=new Uint8Array(t),w.current.connect(b.current)}catch(e){console.warn("오디오 시각화를 초기화할 수 없습니다:",e)}},[]),N=(0,s.useCallback)(()=>{b.current&&e&&v.current&&(b.current.getByteFrequencyData(v.current),y.current.forEach((e,t)=>{if(e&&v.current){let r=v.current[t]/255*50;e.style.height=Math.max(5,r)+"px"}}),e&&(C.current=requestAnimationFrame(N)))},[e]),S=(0,s.useCallback)(()=>{p.current=new(window.SpeechRecognition||window.webkitSpeechRecognition);let n=p.current;n.continuous=!0,n.interimResults=!0,n.lang=u,n.maxAlternatives=1,n.onstart=()=>{t(!0),d({message:"듣는 중...",type:"listening"}),g("")},n.onresult=e=>{let t="",n=r;for(let r=e.resultIndex;r<e.results.length;r++){let s=e.results[r][0].transcript;e.results[r].isFinal?n+=s+" ":t+=s}c(n),l(t)},n.onerror=e=>{console.error("음성 인식 오류:",e.error),g("음성 인식 오류: ".concat(e.error)),R()},n.onend=()=>{e&&p.current&&setTimeout(()=>{if(e&&p.current)try{p.current.start()}catch(e){console.error("재시작 오류:",e),R()}},100)}},[u,r,e]),D=(0,s.useCallback)(()=>{if(j()){S();try{var e;null==(e=p.current)||e.start(),N()}catch(e){g("음성 인식을 시작할 수 없습니다: "+e.message)}}},[j,S,N]),R=(0,s.useCallback)(()=>{t(!1),l(""),p.current&&p.current.stop(),C.current&&cancelAnimationFrame(C.current),d({message:"정지됨",type:"stopped"}),y.current.forEach(e=>{e&&(e.style.height="5px")})},[]),A=(0,s.useCallback)(()=>{c(""),l("")},[]),E=(0,s.useCallback)(t=>{i(t.target.value),e&&(R(),setTimeout(()=>D(),500))},[e,R,D]);return(0,s.useEffect)(()=>{m(r.trim().split(/\s+/).filter(e=>e.length>0).length)},[r]),(0,s.useEffect)(()=>(k(),()=>{p.current&&e&&p.current.stop(),C.current&&cancelAnimationFrame(C.current),f.current&&f.current.close()}),[k,e]),(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("h1",{children:"\uD83C\uDFA4 실시간 Speech-to-Text"}),(0,n.jsxs)("div",{className:"language-select",children:[(0,n.jsx)("label",{htmlFor:"language",children:"언어 선택: "}),(0,n.jsx)("select",{id:"language",value:u,onChange:E,children:[{code:"ko-KR",name:"한국어"},{code:"en-US",name:"English (US)"},{code:"ja-JP",name:"日本語"},{code:"zh-CN",name:"中文 (简体)"}].map(e=>(0,n.jsx)("option",{value:e.code,children:e.name},e.code))})]}),(0,n.jsxs)("div",{className:"controls",children:[(0,n.jsx)("button",{onClick:D,disabled:e,className:"start-btn",type:"button",children:"\uD83C\uDFA4 시작"}),(0,n.jsx)("button",{onClick:R,disabled:!e,className:"stop-btn",type:"button",children:"⏹️ 정지"}),(0,n.jsx)("button",{onClick:A,className:"clear-btn",type:"button",children:"\uD83D\uDDD1️ 지우기"})]}),(0,n.jsx)("div",{className:"status ".concat(o.type),children:x||o.message}),(0,n.jsx)("div",{className:"audio-visualizer",children:Array.from({length:50},(e,t)=>(0,n.jsx)("div",{className:"wave-bar",ref:e=>{e&&(y.current[t]=e)},style:{height:"5px"}},t))}),(0,n.jsxs)("div",{className:"text-output",children:[r&&(0,n.jsx)("div",{className:"final-text",children:r}),a&&(0,n.jsx)("div",{className:"interim-text",children:a}),!r&&!a&&(0,n.jsx)("div",{style:{color:"#999"},children:"음성 인식 결과가 여기에 표시됩니다..."})]}),(0,n.jsxs)("div",{className:"word-count",children:["단어 수: ",h]}),(0,n.jsx)("div",{className:"info",children:"\uD83D\uDCA1 팁: Chrome 브라우저에서 최적의 성능을 보입니다. 마이크 권한을 허용해주세요."})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=479)),_N_E=e.O()}]);